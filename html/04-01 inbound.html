<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>CountHub - 입고</title>
  <link rel="stylesheet" href="../style/common-style.css">
  <link rel="stylesheet" href="../style/inbound-style.css">
  <link rel="stylesheet" href="../style/main-style.css">
</head>
<body>
  <div class="screen">
    <div id="app-header"></div>
    <div class="inbound-header">
      <div class="inbound-header-inner">
        <h2 class="inbound-title">입고</h2>
      </div>
    </div>
    <div class="inbound-content">
          <div class="excel-upload">
          <label class="excel-label">입고예정엑셀파일(셀러) :</label>
          <div class="excel-controls">
           <input id="inbound-excel-file" type="file" accept=".xlsx,.xls" style="display:none">
           <button id="btn-select-excel" class="excel-btn">엑셀파일 .xlsx, .xls 양식만 가능</button>
          </div>
        </div>
      <div class="inbound-form">
        <div class="grid-row">
          <div class="field">
            <div class="field-label">셀러</div>
            <div class="field-control">
              <select id="sel-seller">
                <option value="">선택</option>
              </select>
            </div>
          </div>
          <div class="field">
            <div class="field-label">입고센터</div>
            <div class="field-control">
              <select id="sel-center">
                <option value="">선택</option>
              </select>
            </div>
          </div>
          <div class="field">
            <div class="field-label">상품구분</div>
            <div class="field-control">
              <select id="sel-type">
                <option value="">선택</option>
              </select>
            </div>
          </div>
          <div class="field">
            <div class="field-label">쇼핑몰</div>
            <div class="field-control">
              <select id="sel-shop">
                <option value="">선택</option>
              </select>
            </div>
          </div>
          <div class="field">
            <div class="field-label">입고예정일</div>
            <div class="field-control">
              <input 
                id="dateInput"
                placeholder="YYYYMMDD"
                maxlength="8"
              />
              <div id="dateError" style="color:red; font-size:12px; display:none; margin-top:4px;">
               존재하지 않는 날짜입니다.
              </div>
            </div>
          </div>
        </div>

        <div class="grid-row">
          <div class="field">
            <div class="field-label">SKU</div>
            <div class="field-control">
              <input id="sku" type="text" value="">
            </div>
          </div>
          <div class="field">
            <div class="field-label">상품명</div>
            <div class="field-control">
              <input id="product-name" type="text" value="">
            </div>
          </div>
          <div class="field">
            <div class="field-label">유통기한</div>
            <div class="field-control">
              <input id="expiry" type="text" value="">
            </div>
          </div>
          <div class="field">
            <div class="field-label">LOT</div>
            <div class="field-control">
              <input id="lot" type="text" value="">
            </div>
          </div>
          <div class="field">
            <div class="field-label">입고예정수량</div>
            <div class="field-control">
              <input id="expected-qty" type="text" value="">
            </div>
          </div>
        </div>
      </div>
      <div class="excel-actions">
        <button id="btn-process" class="action-btn">입고파일 작업</button>
        <button id="btn-verify" class="action-btn">입고검수파일 작업</button>
      </div>
    </div>
  </div>
  <script src="../js/header.js"></script>
  <script src="../js/renderer-inbound.js"></script>
  <script>
    (function(){
      const btn = document.getElementById('btn-select-excel');
      const input = document.getElementById('inbound-excel-file');
      if(!btn || !input) return;
      const defaultLabel = '엑셀파일 .xlsx, .xls 양식만 가능';
      btn.addEventListener('click', function(){ input.click(); });
      input.addEventListener('change', function(e){
        const file = e.target.files && e.target.files[0];
        if(!file){
          btn.textContent = defaultLabel;
          btn.title = defaultLabel;
          return;
        }
        const name = file.name || '';
        const ext = name.split('.').pop().toLowerCase();
        if(['xlsx','xls'].includes(ext)){
          // show truncated text in button, full name on hover
          btn.textContent = name;
          btn.title = name;
        } else {
          alert('가능한 양식이 아닙니다');
          input.value = '';
          btn.textContent = defaultLabel;
          btn.title = defaultLabel;
        }
      });
    })();
  </script>
</body>
</html>
